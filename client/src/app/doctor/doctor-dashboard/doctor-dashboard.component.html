@if (!loading) {
  <div  class="spinner-overlay">
    <div class="spinner"></div>
  </div>
}
@else {


  <div class="dashboard-container" style="display: flex; gap: 20px; height: calc(100vh - 40px);">
    <!-- Left Section (Main content) -->
    <div style="flex: 1; overflow-y: auto;">
      <!-- Stats Cards -->
      <div class="stats-cards">
        <div class="card">
          <h3>Today Sessions</h3>
          <p class="count">{{todaySession}}</p>
        </div>
        <div class="card">
          <h3>New Patients</h3>
          <div class="count-row">
            <p class="count">{{newPatients}}</p>
          </div>
        </div>
        <div class="card">
          <h3>Total Patients</h3>
          <div class="count-row">
            <p class="count">{{totalPatiets}}</p>
          </div>
        </div>
      </div>

      <!-- Patients Data Table -->
      <div class="patients-data">
        <h3>Patients Data</h3>
        <!-- Table Header -->
        <div class="table-wrapper">
          <table class="sync-table">
            <thead>
              <tr>
                <th style="width: 5%;">No</th>
                <th style="width: 25%;">Name</th>
                <th style="width: 30%;">Date Of The Session</th>
                <th style="width: 15%;">Duration</th>
                <th style="width: 25%;">Reports/Journals</th>
              </tr>
            </thead>
          </table>

          <div class="table-body-scroll">
            <table class="sync-table">
              <tbody>
                <tr *ngFor="let patient of patients; index as i">
                  <td style="width: 5%;">{{ i + 1 }}</td>
                  <td style="width: 25%;">{{ patient.Name }}</td>
                  <td style="width: 30%;">{{ patient.date }}</td>
                  <td style="width: 15%;">{{ patient.duration }} mins</td>
                  <td style="width: 25%;">
                    <button class="btn report">Report</button>
                    <button class="btn journal">Journal</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

      </div>
    </div>

    <!-- Right Section (Timer + Upcoming Sessions) -->
    <div style="width: 300px; display: flex; flex-direction: column; gap: 20px;">
      <!-- Timer Card -->
      <app-countdown  [scheduledTime]='upcomingSessionDate' [sessionId]="upcomingSessionID" [state]="upcomingSessionState"></app-countdown>

      <!-- Scrollable Upcoming Sessions -->
      <!-- Scrollable Upcoming Sessions with fixed height -->
      <div style="height: 450px; overflow-y: auto; background: white; padding: 16px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
        <h4 style="margin-bottom: 12px;">Up Coming Sessions</h4>

        <div *ngFor="let session of upcomingSessions" style="border: 1px solid #ccc; padding: 12px; border-radius: 10px; margin-bottom: 12px;">
          <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
            <div style="width: 40px; height: 40px; border-radius: 50%; background-color: #ccc;"></div> <!-- SHOULD BE IMAGE -->
            <div>
              <div style="font-weight: bold;">{{ session.patient_name }}</div>
              <div style="font-size: 12px; color: #777;">{{ session.specialization }}</div>
            </div>
          </div>
          <div style="font-size: 13px; margin-bottom: 8px;">
            ðŸ“… {{ session.date }} &nbsp;&nbsp; ðŸ•’ {{ session.time }}
          </div>
          <div class="upcomingSessionButton" style="display: flex; gap: 8px;">
            <button class="btn view-details">View Details</button>
          </div>
        </div>
      </div>
    </div>
  </div>

}
