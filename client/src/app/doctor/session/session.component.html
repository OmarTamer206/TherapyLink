
@if (!loading) {
  <div  class="spinner-overlay">
    <div class="spinner"></div>
  </div>
}
@else {

<section>
  <div class="left">
    <div class="container first">
      <div class="session-info">
        <div class="image-placeholder"></div>
        <div class="info">
          <p class="name">{{patientData.patient[0].Name}}</p>
          <p class="specialization">{{patientData.patient[0].Therapist_Preference}}</p>
        </div>
      </div>
      <div class="start-session-container">
        <button class="session-timer-btn">Session Starts in <br>{{timeLeft}}</button>
        <button class="start-session" (click)="startSession()" [disabled]="!startButtonState">Start Session</button>

      </div>
    </div>

    <div class="container second">
      <span class="session-date">Session Date: {{sessionData.date}}</span>
      <span class="session-duration">Duration: {{sessionData.time}}</span>
    </div>

    <div class="container third">


      @if(!sessionStarted) {

        <div class="session-waiting">
          <p>Chat will be available after session starts</p>
        </div>

      }

    @else{


      <app-chat-section
      *ngIf="chatId !='' && userId!='' && userType && receiverId!=''  && receiverType"
      [chatId]="chatId"
      [userId]="userId"
      [userType]="userType"
      [receiverId]="receiverId"
      [receiverType]="receiverType"

      style="width: 100%;height: 100%;"
      ></app-chat-section>

    }

    </div>
  </div>

  <div class="right">
    <div class="top">
      <div class="buttons-container">
        <button class="view-report" (click)="toggleReport()">
          View Report
        </button>
        <button class="view-journal" (click)="toggleJournal()">
          View Journal
        </button>
      </div>
    </div>
    <div class="bottom">
      <div *ngIf="showReport" class="right-content">
        <app-report [doctorReport] = "patientData.reports"></app-report>
      </div>
      <div *ngIf="showJournal" class="right-content">
        <app-journal [journalEntries] = "patientData.journals"></app-journal>
      </div>
    </div>
  </div>
</section>

}
